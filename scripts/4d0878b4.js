document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector("#u"),e=document.querySelector("#a"),a=document.querySelector("#s"),r=document.querySelector("#f"),s=document.querySelector("#_"),i=document.querySelector("#q"),n=document.querySelector("#v"),o=document.querySelector("#m"),d=document.querySelector("#tr"),c=d.querySelector(".sn"),u=d.querySelector(".sr"),l=d.querySelector(".si"),b=d.querySelector(".su"),m=d.querySelector(".sv"),p=document.querySelector("#c"),f=document.querySelector("#p"),v=document.querySelector("#n"),g=document.querySelector("#g"),A=document.querySelector("#r"),k=document.querySelector("#y"),h=document.querySelector("#t"),y=document.querySelector("#j"),S=document.querySelector("#z"),w=document.querySelector("#h"),L=document.querySelector("#d");function q(t,e="desktop"){switch(t){case"tools":"desktop"===e?(s.setAttribute("aria-expanded","true"),i.setAttribute("data-state","visible")):(y.setAttribute("aria-expanded","true"),S.setAttribute("data-state","visible"));break;case"settings":"desktop"===e?(p.setAttribute("aria-expanded","true"),f.setAttribute("data-state","visible")):(w.setAttribute("aria-expanded","true"),L.setAttribute("data-state","visible"))}}function x(t,e="desktop"){switch(t){case"tools":"desktop"===e?(s.setAttribute("aria-expanded","false"),i.setAttribute("data-state","invisible")):(y.setAttribute("aria-expanded","false"),S.setAttribute("data-state","invisible"));break;case"settings":"desktop"===e?(p.setAttribute("aria-expanded","false"),f.setAttribute("data-state","invisible")):(w.setAttribute("aria-expanded","false"),L.setAttribute("data-state","invisible"));break;default:"desktop"===e?(s.setAttribute("aria-expanded","false"),i.setAttribute("data-state","invisible"),p.setAttribute("aria-expanded","false"),f.setAttribute("data-state","invisible")):"mobile"===e?(y.setAttribute("aria-expanded","false"),S.setAttribute("data-state","invisible"),w.setAttribute("aria-expanded","false"),L.setAttribute("data-state","invisible")):(s.setAttribute("aria-expanded","false"),i.setAttribute("data-state","invisible"),p.setAttribute("aria-expanded","false"),f.setAttribute("data-state","invisible"),y.setAttribute("aria-expanded","false"),S.setAttribute("data-state","invisible"),w.setAttribute("aria-expanded","false"),L.setAttribute("data-state","invisible"))}}function E(){d.setAttribute("aria-expanded","true"),setTimeout((()=>{b.focus()}),300)}function I(){l.style.transform="scale(95%)",setTimeout((()=>{c.style.opacity="0"}),300),setTimeout((()=>{l.removeAttribute("style"),c.removeAttribute("style"),d.setAttribute("aria-expanded","false"),b.value="",m.innerHTML=""}),450)}c.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),u.contains(t.target)||I(),t.target.getAttribute("data-location")&&window.open(t.target.getAttribute("data-location"),"_self")})),t.addEventListener("click",(function(t){"open"===e.getAttribute("data-state")?(q("tools","mobile"),x("settings","mobile"),this.setAttribute("data-state","inactive"),e.setAttribute("data-state","close")):(this.setAttribute("data-state","sl"),e.setAttribute("data-state","open"))})),a.addEventListener("mouseenter",(function(){x("all","desktop")})),r.addEventListener("mouseenter",(function(){x("all","desktop")})),s.addEventListener("mouseenter",(function(t){x("all","desktop"),q("tools","desktop")})),i.addEventListener("mouseleave",(function(t){x("tools","desktop")})),s.addEventListener("click",(function(t){t.stopPropagation(),"true"===this.getAttribute("aria-expanded")?x("tools","desktop"):q("tools","desktop")})),n.addEventListener("mouseenter",(function(){x("all","desktop")})),n.addEventListener("click",(function(){E()})),o.addEventListener("mouseenter",(function(){x("all","desktop")})),o.addEventListener("click",(function(){E()})),p.addEventListener("mouseenter",(function(t){x("all","desktop"),q("settings","desktop")})),f.addEventListener("mouseleave",(function(t){x("settings","desktop")})),p.addEventListener("click",(function(t){t.stopPropagation(),"true"===this.getAttribute("aria-expanded")?x("settings","desktop"):q("settings","desktop")})),y.addEventListener("click",(function(t){"true"===this.getAttribute("aria-expanded")?x("tools","mobile"):q("tools","mobile")})),w.addEventListener("click",(function(t){"true"===this.getAttribute("aria-expanded")?x("settings","mobile"):q("settings","mobile")})),g.addEventListener("change",(function(t){const e=t.target.checked;e?document.querySelector(".ri").setAttribute("data-sticky-header","true"):document.querySelector(".ri").setAttribute("data-sticky-header","false"),window.localStorage.setItem("sticky-header",e)})),k.addEventListener("change",(function(t){const e=t.target.checked;e?document.querySelector(".ri").setAttribute("data-sticky-header","true"):document.querySelector(".ri").setAttribute("data-sticky-header","false"),window.localStorage.setItem("sticky-header",e)})),v.addEventListener("change",(function(t){window.localStorage.setItem("rs",t.target.checked),t.target.checked&&window.scrollY>200?h.classList.add("ro"):t.target.checked||h.classList.remove("ro")})),A.addEventListener("change",(function(t){window.localStorage.setItem("rs",t.target.checked),t.target.checked&&window.scrollY>200?h.classList.add("ro"):t.target.checked||h.classList.remove("ro")})),h.addEventListener("click",(function(t){t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(function(){"true"===window.localStorage.getItem("rs")&&(window.scrollY>200?h.classList.add("ro"):h.classList.remove("ro"))})),document.addEventListener("keydown",(function(a){"Escape"===a.key&&("true"===d.getAttribute("aria-expanded")?0===b.value.length?I():b.value="":(x("all"),t.setAttribute("data-state","inactive"),e.setAttribute("data-state","close")))})),document.addEventListener("click",(function(t){"true"===s.getAttribute("aria-expanded")&&(s.contains(t.target)||i.contains(t.target)||x("tools","desktop")),"true"===p.getAttribute("aria-expanded")&&(p.contains(t.target)||f.contains(t.target)||x("settings","desktop"))})),null===window.localStorage.getItem("rs")||"true"===window.localStorage.getItem("rs")?(v.setAttribute("checked",""),A.setAttribute("checked",""),null===window.localStorage.getItem("rs")&&window.localStorage.setItem("rs",!0)):(v.removeAttribute("checked"),A.removeAttribute("checked")),"true"===window.localStorage.getItem("sticky-header")?(g.setAttribute("checked",""),k.setAttribute("checked",""),document.querySelector(".ri").setAttribute("data-sticky-header","true")):(g.removeAttribute("checked"),k.removeAttribute("checked"),document.querySelector(".ri").setAttribute("data-sticky-header","false")),async function(){const t=await async function(){let t=sessionStorage.getItem("search-data");if(t)try{return JSON.parse(t)}catch(t){}try{const t=await fetch("/data/search.json",{method:"GET",headers:{"Content-Type":"application/json"}}),e=await t.json();return sessionStorage.setItem("search-data",JSON.stringify(e)),e}catch(t){return null}}(),e=function(t){const e=new FlexSearch.Index({tokenize:"forward",cache:!0});try{const t=sessionStorage.getItem("search-index");if(!t||0===t.length)throw new Error("Invalid search data found!");const a=JSON.parse(t);for(const[t,r]of Object.entries(a))e.import(t,r)}catch(a){for(let a of t)e.add(a.id,a.title);const r={};e.export(((t,e)=>{r[t]=JSON.parse(e),sessionStorage.setItem("search-index",JSON.stringify(r))}))}return e}(t);b.addEventListener("input",(function(a){if(""===this.value)return void(m.innerHTML="");const r=e.search(this.value);let s="";for(const e of r){const a=t[e];s+=`<div class="sm" data-location="${a.location}">${a.title}</div>`}m.innerHTML=s}))}()}));