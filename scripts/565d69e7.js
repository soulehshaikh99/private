document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#u"),t=document.querySelector("#a"),r=document.querySelector("#s"),a=document.querySelector("#f"),n=document.querySelector("#j"),s=document.querySelector("#z"),i=document.querySelector("#v"),o=document.querySelector("#m"),c=document.querySelector("#g"),d=c.querySelector(".ro"),u=d.querySelector(".ru"),l=u.querySelector(".ra"),b=l.querySelector(".rc"),f=l.querySelector(".rh"),v=document.querySelector("#c"),m=document.querySelector("#p"),p=document.querySelector("#n"),g=document.querySelector("#y"),h=document.querySelector("#r"),k=document.querySelector("#b"),A=document.querySelector("#t"),y=document.querySelector("#q"),S=document.querySelector("#te"),w=document.querySelector("#h"),L=document.querySelector("#d");let E=-1;function q(e,t="desktop"){switch(e){case"tools":"desktop"===t?(n.setAttribute("aria-expanded","true"),s.setAttribute("data-state","visible")):(y.setAttribute("aria-expanded","true"),S.setAttribute("data-state","visible"));break;case"settings":"desktop"===t?(v.setAttribute("aria-expanded","true"),m.setAttribute("data-state","visible")):(w.setAttribute("aria-expanded","true"),L.setAttribute("data-state","visible"))}}function x(e,t="desktop"){switch(e){case"tools":"desktop"===t?(n.setAttribute("aria-expanded","false"),s.setAttribute("data-state","invisible")):(y.setAttribute("aria-expanded","false"),S.setAttribute("data-state","invisible"));break;case"settings":"desktop"===t?(v.setAttribute("aria-expanded","false"),m.setAttribute("data-state","invisible")):(w.setAttribute("aria-expanded","false"),L.setAttribute("data-state","invisible"));break;default:"desktop"===t?(n.setAttribute("aria-expanded","false"),s.setAttribute("data-state","invisible"),v.setAttribute("aria-expanded","false"),m.setAttribute("data-state","invisible")):"mobile"===t?(y.setAttribute("aria-expanded","false"),S.setAttribute("data-state","invisible"),w.setAttribute("aria-expanded","false"),L.setAttribute("data-state","invisible")):(n.setAttribute("aria-expanded","false"),s.setAttribute("data-state","invisible"),v.setAttribute("aria-expanded","false"),m.setAttribute("data-state","invisible"),y.setAttribute("aria-expanded","false"),S.setAttribute("data-state","invisible"),w.setAttribute("aria-expanded","false"),L.setAttribute("data-state","invisible"))}}function I(){c.setAttribute("aria-expanded","true"),setTimeout((()=>{b.focus()}),300)}function T(){l.style.transform="scale(95%)",setTimeout((()=>{d.style.opacity="0"}),300),setTimeout((()=>{l.removeAttribute("style"),d.removeAttribute("style"),c.setAttribute("aria-expanded","false"),b.value="",f.innerHTML="",E=-1}),450)}d.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),u.contains(e.target)||T()})),e.addEventListener("click",(function(e){"open"===t.getAttribute("data-state")?(q("tools","mobile"),x("settings","mobile"),this.setAttribute("data-state","inactive"),t.setAttribute("data-state","close")):(this.setAttribute("data-state","active"),t.setAttribute("data-state","open"))})),r.addEventListener("mouseenter",(function(){x("all","desktop")})),a.addEventListener("mouseenter",(function(){x("all","desktop")})),n.addEventListener("mouseenter",(function(e){x("all","desktop"),q("tools","desktop")})),s.addEventListener("mouseleave",(function(e){x("tools","desktop")})),n.addEventListener("click",(function(e){e.stopPropagation(),"true"===this.getAttribute("aria-expanded")?x("tools","desktop"):q("tools","desktop")})),i.addEventListener("mouseenter",(function(){x("all","desktop")})),i.addEventListener("click",(function(){I()})),o.addEventListener("mouseenter",(function(){x("all","desktop")})),o.addEventListener("click",(function(){I()})),v.addEventListener("mouseenter",(function(e){x("all","desktop"),q("settings","desktop")})),m.addEventListener("mouseleave",(function(e){x("settings","desktop")})),v.addEventListener("click",(function(e){e.stopPropagation(),"true"===this.getAttribute("aria-expanded")?x("settings","desktop"):q("settings","desktop")})),y.addEventListener("click",(function(e){"true"===this.getAttribute("aria-expanded")?x("tools","mobile"):q("tools","mobile")})),w.addEventListener("click",(function(e){"true"===this.getAttribute("aria-expanded")?x("settings","mobile"):q("settings","mobile")})),g.addEventListener("change",(function(e){const t=e.target.checked;t?document.querySelector(".ri").setAttribute("data-sticky-header","true"):document.querySelector(".ri").setAttribute("data-sticky-header","false"),window.localStorage.setItem("sticky-header",t)})),k.addEventListener("change",(function(e){const t=e.target.checked;t?document.querySelector(".ri").setAttribute("data-sticky-header","true"):document.querySelector(".ri").setAttribute("data-sticky-header","false"),window.localStorage.setItem("sticky-header",t)})),p.addEventListener("change",(function(e){window.localStorage.setItem("rv",e.target.checked),e.target.checked&&window.scrollY>200?A.classList.add("rm"):e.target.checked||A.classList.remove("rm")})),h.addEventListener("change",(function(e){window.localStorage.setItem("rv",e.target.checked),e.target.checked&&window.scrollY>200?A.classList.add("rm"):e.target.checked||A.classList.remove("rm")})),A.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(function(){"true"===window.localStorage.getItem("rv")&&(window.scrollY>200?A.classList.add("rm"):A.classList.remove("rm"))})),document.addEventListener("keydown",(function(r){if("true"===c.getAttribute("aria-expanded"))return function(e){if("Escape"===e.key)return e.preventDefault(),void(0===b.value.length?T():(b.value="",f.innerHTML="",E=-1));const t=f.querySelectorAll(".rp");if(t.length)switch(e.key){case"ArrowUp":e.preventDefault(),E=(E-1+t.length)%t.length,r(t);break;case"ArrowDown":e.preventDefault(),E=(E+1)%t.length,r(t);break;case"Enter":e.preventDefault(),E>=0&&t[E]&&t[E].click()}function r(e){for(let t=0;t<e.length;t++){const r=e[t];t===E?(r.classList.add("rd"),r.scrollIntoView({block:"nearest"})):r.classList.remove("rd")}}}(r);"Escape"===r.key&&(r.preventDefault(),x("all"),e.setAttribute("data-state","inactive"),t.setAttribute("data-state","close"))})),document.addEventListener("click",(function(e){"true"===n.getAttribute("aria-expanded")&&(n.contains(e.target)||s.contains(e.target)||x("tools","desktop")),"true"===v.getAttribute("aria-expanded")&&(v.contains(e.target)||m.contains(e.target)||x("settings","desktop"))})),null===window.localStorage.getItem("rv")||"true"===window.localStorage.getItem("rv")?(p.setAttribute("checked",""),h.setAttribute("checked",""),null===window.localStorage.getItem("rv")&&window.localStorage.setItem("rv",!0)):(p.removeAttribute("checked"),h.removeAttribute("checked")),"true"===window.localStorage.getItem("sticky-header")?(g.setAttribute("checked",""),k.setAttribute("checked",""),document.querySelector(".ri").setAttribute("data-sticky-header","true")):(g.removeAttribute("checked"),k.removeAttribute("checked"),document.querySelector(".ri").setAttribute("data-sticky-header","false")),async function(){const e=await async function(){let e=sessionStorage.getItem("search-data");if(e)try{return JSON.parse(e)}catch(e){}try{const e=await fetch("/data/search.json",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();return sessionStorage.setItem("search-data",JSON.stringify(t)),t}catch(e){return null}}(),t=function(e){const t=new FlexSearch.Index({tokenize:"forward",cache:!0});try{const e=sessionStorage.getItem("search-index");if(!e||0===e.length)throw new Error("Invalid search data found!");const r=JSON.parse(e);for(const[e,a]of Object.entries(r))t.import(e,a)}catch(r){for(let r of e)t.add(r.id,r.title);const a={};t.export(((e,t)=>{a[e]=JSON.parse(t),sessionStorage.setItem("search-index",JSON.stringify(a))}))}return t}(e);b.addEventListener("input",(function(r){if(""===this.value)return void(f.innerHTML="");const a=t.search(this.value);f.innerHTML=function(e,t){if(0===t.length)return"";const r={};for(const a of t){const t=e[a];let n=t.category.charAt(0).toUpperCase()+t.category.slice(1).toLowerCase();r[n]||(r[n]=[]),r[n].push(t)}let a="<ul>";for(const e in r)a+=`<li>\n            <h2>${e}</h2>\n            <ul>`,r[e].forEach((e=>{a+=`<div class="rp" data-location="${e.location}">\n              ${e.title}\n            </div>`})),a+="</ul>\n          </li>";return a+="</ul>",a}(e,a),function(){const e=f.querySelectorAll(".rp");if(e.length)for(let t=0;t<e.length;t++){const r=e[t];r.addEventListener("mouseenter",(()=>{for(let t=0;t<e.length;t++)e[t].classList.remove("rd");r.classList.add("rd"),E=t})),r.addEventListener("mouseleave",(()=>{r.classList.remove("rd"),E=-1})),r.addEventListener("click",(()=>{r.getAttribute("data-location")&&window.open(r.getAttribute("data-location"),"_self")}))}}()}))}()}));