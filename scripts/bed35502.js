document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#u"),t=document.querySelector("#a"),a=document.querySelector("#s"),r=document.querySelector("#f"),s=document.querySelector("#j"),n=document.querySelector("#z"),i=document.querySelector("#v"),o=document.querySelector("#m"),c=document.querySelector("#g"),d=c.querySelector(".ru"),l=d.querySelector(".ra"),u=l.querySelector(".rf"),b=u.querySelector(".rh"),f=u.querySelector(".rp"),p=f.querySelector(".rv"),v=f.querySelector(".rd"),m=document.querySelector("#c"),g=document.querySelector("#p"),h=document.querySelector("#n"),k=document.querySelector("#y"),A=document.querySelector("#r"),y=document.querySelector("#b"),S=document.querySelector("#t"),w=document.querySelector("#q"),L=document.querySelector("#te"),E=document.querySelector("#h"),q=document.querySelector("#d");let x=-1;function I(e,t="desktop"){switch(e){case"tools":"desktop"===t?(s.setAttribute("aria-expanded","true"),n.setAttribute("data-state","visible")):(w.setAttribute("aria-expanded","true"),L.setAttribute("data-state","visible"));break;case"settings":"desktop"===t?(m.setAttribute("aria-expanded","true"),g.setAttribute("data-state","visible")):(E.setAttribute("aria-expanded","true"),q.setAttribute("data-state","visible"))}}function D(e,t="desktop"){switch(e){case"tools":"desktop"===t?(s.setAttribute("aria-expanded","false"),n.setAttribute("data-state","invisible")):(w.setAttribute("aria-expanded","false"),L.setAttribute("data-state","invisible"));break;case"settings":"desktop"===t?(m.setAttribute("aria-expanded","false"),g.setAttribute("data-state","invisible")):(E.setAttribute("aria-expanded","false"),q.setAttribute("data-state","invisible"));break;default:"desktop"===t?(s.setAttribute("aria-expanded","false"),n.setAttribute("data-state","invisible"),m.setAttribute("aria-expanded","false"),g.setAttribute("data-state","invisible")):"mobile"===t?(w.setAttribute("aria-expanded","false"),L.setAttribute("data-state","invisible"),E.setAttribute("aria-expanded","false"),q.setAttribute("data-state","invisible")):(s.setAttribute("aria-expanded","false"),n.setAttribute("data-state","invisible"),m.setAttribute("aria-expanded","false"),g.setAttribute("data-state","invisible"),w.setAttribute("aria-expanded","false"),L.setAttribute("data-state","invisible"),E.setAttribute("aria-expanded","false"),q.setAttribute("data-state","invisible"))}}function T(){c.setAttribute("aria-expanded","true"),setTimeout((()=>{b.focus()}),300),b.dispatchEvent(new InputEvent("input",{bubbles:!0,cancelable:!0,data:""}))}function O(){u.style.transform="scale(95%)",setTimeout((()=>{d.style.opacity="0"}),300),setTimeout((()=>{u.removeAttribute("style"),d.removeAttribute("style"),c.setAttribute("aria-expanded","false"),b.value="",v.innerHTML="",x=-1}),450)}d.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),l.contains(e.target)||O()})),e.addEventListener("click",(function(e){"open"===t.getAttribute("data-state")?(I("tools","mobile"),D("settings","mobile"),this.setAttribute("data-state","inactive"),t.setAttribute("data-state","close")):(this.setAttribute("data-state","active"),t.setAttribute("data-state","open"))})),a.addEventListener("mouseenter",(function(){D("all","desktop")})),r.addEventListener("mouseenter",(function(){D("all","desktop")})),s.addEventListener("mouseenter",(function(e){D("all","desktop"),I("tools","desktop")})),n.addEventListener("mouseleave",(function(e){D("tools","desktop")})),s.addEventListener("click",(function(e){e.stopPropagation(),"true"===this.getAttribute("aria-expanded")?D("tools","desktop"):I("tools","desktop")})),i.addEventListener("mouseenter",(function(){D("all","desktop")})),i.addEventListener("click",(function(){T()})),o.addEventListener("mouseenter",(function(){D("all","desktop")})),o.addEventListener("click",(function(){T()})),m.addEventListener("mouseenter",(function(e){D("all","desktop"),I("settings","desktop")})),g.addEventListener("mouseleave",(function(e){D("settings","desktop")})),m.addEventListener("click",(function(e){e.stopPropagation(),"true"===this.getAttribute("aria-expanded")?D("settings","desktop"):I("settings","desktop")})),w.addEventListener("click",(function(e){"true"===this.getAttribute("aria-expanded")?D("tools","mobile"):I("tools","mobile")})),E.addEventListener("click",(function(e){"true"===this.getAttribute("aria-expanded")?D("settings","mobile"):I("settings","mobile")})),k.addEventListener("change",(function(e){const t=e.target.checked;t?document.querySelector(".rs").setAttribute("data-sticky-header","true"):document.querySelector(".rs").setAttribute("data-sticky-header","false"),window.localStorage.setItem("sticky-header",t)})),y.addEventListener("change",(function(e){const t=e.target.checked;t?document.querySelector(".rs").setAttribute("data-sticky-header","true"):document.querySelector(".rs").setAttribute("data-sticky-header","false"),window.localStorage.setItem("sticky-header",t)})),h.addEventListener("change",(function(e){window.localStorage.setItem("in",e.target.checked),e.target.checked&&window.scrollY>200?S.classList.add("ir"):e.target.checked||S.classList.remove("ir")})),A.addEventListener("change",(function(e){window.localStorage.setItem("in",e.target.checked),e.target.checked&&window.scrollY>200?S.classList.add("ir"):e.target.checked||S.classList.remove("ir")})),S.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(function(){"true"===window.localStorage.getItem("in")&&(window.scrollY>200?S.classList.add("ir"):S.classList.remove("ir"))})),document.addEventListener("keydown",(function(a){if("true"===c.getAttribute("aria-expanded"))return function(e){if("Escape"===e.key)return e.preventDefault(),void(0===b.value.length?O():(b.value="",b.dispatchEvent(new InputEvent("input",{bubbles:!0,cancelable:!0,data:""})),x=-1));const t=v.querySelectorAll(".rw");if(t.length)switch(e.key){case"ArrowUp":e.preventDefault(),x=(x-1+t.length)%t.length,a(t);break;case"ArrowDown":e.preventDefault(),x=(x+1)%t.length,a(t);break;case"Enter":e.preventDefault(),x>=0&&t[x]&&t[x].click()}function a(e){for(let t=0;t<e.length;t++){const a=e[t];t===x?(a.classList.add("rx"),a.scrollIntoView({block:"nearest"})):a.classList.remove("rx")}}}(a);"Escape"===a.key?(a.preventDefault(),D("all"),e.setAttribute("data-state","inactive"),t.setAttribute("data-state","close")):(a.ctrlKey||a.metaKey)&&"K"===a.key.toUpperCase()&&(a.preventDefault(),i.click())})),document.addEventListener("click",(function(e){"true"===s.getAttribute("aria-expanded")&&(s.contains(e.target)||n.contains(e.target)||D("tools","desktop")),"true"===m.getAttribute("aria-expanded")&&(m.contains(e.target)||g.contains(e.target)||D("settings","desktop"))})),null===window.localStorage.getItem("in")||"true"===window.localStorage.getItem("in")?(h.setAttribute("checked",""),A.setAttribute("checked",""),null===window.localStorage.getItem("in")&&window.localStorage.setItem("in",!0)):(h.removeAttribute("checked"),A.removeAttribute("checked")),"true"===window.localStorage.getItem("sticky-header")?(k.setAttribute("checked",""),y.setAttribute("checked",""),document.querySelector(".rs").setAttribute("data-sticky-header","true")):(k.removeAttribute("checked"),y.removeAttribute("checked"),document.querySelector(".rs").setAttribute("data-sticky-header","false")),async function(){const e=await async function(){let e=sessionStorage.getItem("search-data");if(e)try{return JSON.parse(e)}catch(e){}try{const e=await fetch("/data/search.json",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();return sessionStorage.setItem("search-data",JSON.stringify(t)),t}catch(e){return null}}(),t=Array.from({length:e.length},((e,t)=>t)),a=function(e){const t=new FlexSearch.Index({tokenize:"forward",cache:!0});try{const e=sessionStorage.getItem("search-index");if(!e||0===e.length)throw new Error("Invalid search data found!");const a=JSON.parse(e);for(const[e,r]of Object.entries(a))t.import(e,r)}catch(a){for(let a of e)t.add(a.id,a.title);const r={};t.export(((e,t)=>{r[e]=JSON.parse(t),sessionStorage.setItem("search-index",JSON.stringify(r))}))}return t}(e);b.addEventListener("input",(function(r){const s=this.value.trim(),n=""===s?t:a.search(s);v.innerHTML=function(e,t){if(0===t.length)return v.classList.add("t"),void p.classList.remove("t");p.classList.add("t"),v.classList.remove("t");const a={};for(const r of t){const t=e[r];let s=t.category.charAt(0).toUpperCase()+t.category.slice(1).toLowerCase();a[s]||(a[s]=[]),a[s].push(t)}let r="";for(const e in a){r+=`<li><h2 class="rb">${e}</h2><ul>`;for(let t of a[e])r+=`<div class="rw" data-location="${t.location}">${t.title}</div>`;r+="</ul></li>"}return r}(e,n),function(){const e=v.querySelectorAll(".rw");if(e.length)for(let t=0;t<e.length;t++){const a=e[t];a.addEventListener("mouseenter",(()=>{for(let t=0;t<e.length;t++)e[t].classList.remove("rx");a.classList.add("rx"),x=t})),a.addEventListener("mouseleave",(()=>{a.classList.remove("rx"),x=-1})),a.addEventListener("click",(()=>{a.getAttribute("data-location")&&window.open(a.getAttribute("data-location"),"_self")}))}}()}))}()}));